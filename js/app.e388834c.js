(function(){"use strict";var e={9381:function(e,t,a){var o=a(9242),n=a(3396),r=a(7139);const i={id:"app",class:"container"},l={key:0,class:"acknowledgment-message"},s={key:1,class:"modal"},d={class:"modal-content"},u=(0,n._)("h2",null,"Disclaimer for PLD-Progression Grouper",-1),c=["innerHTML"],p={class:"header"},g=(0,n._)("img",{src:"logo.webp",alt:"PLD-Progression Grouper Logo",class:"app-logo"},null,-1),h={class:"app-title"},v={class:"app-version"},m={key:0,class:"app-commit"},_={key:1,class:"offline-indicator"},f={class:"content"},w={key:0,class:"id-warning-message"},b={class:"controls"},y={class:"input-group"},A=(0,n._)("label",{for:"idInput"},"ID:",-1),k={class:"input-group"},D=(0,n._)("label",{for:"ageInput"},"Age [y]:",-1),L={key:0,class:"validation-message"},P={class:"input-group"},I=(0,n._)("label",{for:"liverInput"},"Total Liver Volume (TLV) [ml] :",-1),M={key:1,class:"validation-message"},T={class:"input-group output-group"},C=(0,n._)("label",{for:"normalizedTLV"},"Normalized Total Liver Volume (nTLV):",-1),G={class:"output-fields"},H={id:"normalizedTLV",class:"output-field"},V=["disabled"],x=["disabled"],R=["disabled"],E=["disabled"],N={class:"chart-container"},z={ref:"chartCanvas"},F=(0,n._)("div",{class:"progression-groups"},[(0,n._)("div",{class:"progression-group PG3"},[(0,n._)("strong",null,"PG3"),(0,n._)("br"),(0,n.Uk)(">6.6%/y ")]),(0,n._)("div",{class:"progression-group PG2"},[(0,n._)("strong",null,"PG2"),(0,n._)("br"),(0,n.Uk)("3.3-6.6%/y ")]),(0,n._)("div",{class:"progression-group PG1"},[(0,n._)("strong",null,"PG1"),(0,n._)("br"),(0,n.Uk)("<3.3%/y ")])],-1),O={key:1,class:"data-points-table-container"},X={class:"data-points-table"},S=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"ID"),(0,n._)("th",null,"Age [y]"),(0,n._)("th",null,"TLV [ml]"),(0,n._)("th",null,"nTLV"),(0,n._)("th",null,"PG"),(0,n._)("th",null,"LGR [%/y]"),(0,n._)("th",null,"Remove")])],-1),U=(0,n._)("p",null,[(0,n.Uk)(" For a detailed documentation of this tool and the methodology, please refer to the "),(0,n._)("a",{href:"https://github.com/halbritter-lab/pld-progression-grouper",target:"_blank"},"GitHub README"),(0,n.Uk)(". Let us know if you like this tool and how we can improve it using our "),(0,n._)("a",{href:"https://docs.google.com/forms/d/1MM4g1Ukjiy73ThWUMHARDcyQg-PwOWuI46kQV5HwXmY",target:"_blank"},"Feedback Form"),(0,n.Uk)(". ")],-1),q=(0,n._)("p",null,[(0,n.Uk)(" Please cite the following publication for this tool: "),(0,n._)("a",{href:"https://pubmed.ncbi.nlm.nih.gov/36246085/",target:"_blank"}," Sierks D, et al. Modelling polycystic liver disease progression using age-adjusted liver volumes and targeted mutational analysis. JHEP Rep. 2022. "),(0,n.Uk)(),(0,n._)("br"),(0,n.Uk)(" A new manuscript reporting the application of this method in autosomal dominant polycystic liver disease is currently under review. A link will be provided here upon publication. ")],-1),j={class:"footer"},J=["href"],W=["src","alt"];function $(e,t,a,$,B,Y){return(0,n.wg)(),(0,n.iD)("div",i,[$.disclaimerAcknowledged&&!$.showModal?((0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>$.reopenModal&&$.reopenModal(...e))}," Disclaimer "),(0,n.Uk)(" acknowledged on this device at: "+(0,r.zw)($.acknowledgmentTime)+". ",1)])):(0,n.kq)("",!0),$.showModal?((0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",d,[u,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.disclaimerSections,((e,t)=>((0,n.wg)(),(0,n.iD)("section",{key:t},[(0,n._)("h3",null,(0,r.zw)(e.title),1),(0,n._)("p",{innerHTML:e.content},null,8,c)])))),128)),(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>$.closeModal&&$.closeModal(...e))}," I Acknowledge ")])])):(0,n.kq)("",!0),(0,n._)("div",p,[g,(0,n._)("h1",h,[(0,n.Uk)(" PLD-Progression Grouper "),(0,n._)("span",v,"v"+(0,r.zw)($.version)+"-",1),$.fetchError?((0,n.wg)(),(0,n.iD)("span",_,"offline")):((0,n.wg)(),(0,n.iD)("span",m,(0,r.zw)($.lastCommitHash),1))])]),(0,n._)("div",f,[$.idWarningMessage?((0,n.wg)(),(0,n.iD)("div",w,(0,r.zw)($.idWarningMessage),1)):(0,n.kq)("",!0),(0,n._)("div",b,[(0,n._)("div",y,[A,(0,n.wy)((0,n._)("input",{id:"idInput","onUpdate:modelValue":t[2]||(t[2]=e=>$.patientId=e),type:"text",placeholder:"Enter ID"},null,512),[[o.nr,$.patientId]])]),(0,n._)("div",k,[D,(0,n.wy)((0,n._)("input",{id:"ageInput","onUpdate:modelValue":t[3]||(t[3]=e=>$.age=e),type:"number",placeholder:"20-80"},null,512),[[o.nr,$.age]])]),$.ageValidationMessage?((0,n.wg)(),(0,n.iD)("div",L,(0,r.zw)($.ageValidationMessage),1)):(0,n.kq)("",!0),(0,n._)("div",P,[I,(0,n.wy)((0,n._)("input",{id:"liverInput","onUpdate:modelValue":t[4]||(t[4]=e=>$.totalLiverVolume=e),type:"number",placeholder:"0-20000"},null,512),[[o.nr,$.totalLiverVolume]])]),$.tlvValidationMessage?((0,n.wg)(),(0,n.iD)("div",M,(0,r.zw)($.tlvValidationMessage),1)):(0,n.kq)("",!0),(0,n._)("div",T,[C,(0,n._)("div",G,[(0,n._)("output",H,(0,r.zw)($.formattedNormalizedTLV),1),(0,n._)("output",{id:"progressionGroupOutput",class:(0,r.C_)(`progression-group-output ${$.progressionGroup}`)},(0,r.zw)($.progressionGroup),3),(0,n._)("output",{id:"liverGrowthRateOutput",class:(0,r.C_)(`progression-group-output ${$.progressionGroup}`)},(0,r.zw)(null!==$.liverGrowthRate?$.liverGrowthRate.toFixed(2)+" %/y (LGR)":""),3)])]),(0,n._)("button",{class:(0,r.C_)(["plot-point",{"button-disabled":$.isInvalidInput}]),disabled:$.isInvalidInput,onClick:t[5]||(t[5]=(...e)=>$.addDataPoint&&$.addDataPoint(...e))}," Plot Data ",10,V),(0,n._)("button",{onClick:t[6]||(t[6]=(...e)=>$.printPage&&$.printPage(...e))}," Print Page "),(0,n._)("button",{disabled:0===$.dataPoints.length,onClick:t[7]||(t[7]=(...e)=>$.downloadChart&&$.downloadChart(...e))}," Download Plot ",8,x),(0,n._)("button",{disabled:0===$.dataPoints.length,onClick:t[8]||(t[8]=(...e)=>$.saveDataAsJson&&$.saveDataAsJson(...e))}," Save ",8,R),(0,n._)("input",{ref:"fileInput",type:"file",style:{display:"none"},onChange:t[9]||(t[9]=(...e)=>$.loadDataFromJson&&$.loadDataFromJson(...e))},null,544),(0,n._)("button",{onClick:t[10]||(t[10]=(...e)=>$.triggerFileInput&&$.triggerFileInput(...e))}," Load "),(0,n._)("button",{disabled:0===$.dataPoints.length,onClick:t[11]||(t[11]=(...e)=>$.downloadDataAsExcel&&$.downloadDataAsExcel(...e))}," Download (Excel) ",8,E)]),(0,n._)("div",N,[(0,n._)("canvas",z,null,512)]),F,$.dataPoints.length>0?((0,n.wg)(),(0,n.iD)("div",O,[(0,n._)("table",X,[S,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)($.dataPoints,(a=>((0,n.wg)(),(0,n.iD)("tr",{key:a.id},[(0,n._)("td",null,(0,r.zw)(a.id),1),(0,n._)("td",null,(0,r.zw)(a.age),1),(0,n._)("td",null,(0,r.zw)(a.tlv),1),(0,n._)("td",null,(0,r.zw)(a.ntlv),1),(0,n._)("td",null,(0,r.zw)(a.pg),1),(0,n._)("td",null,(0,r.zw)(a.lgr),1),(0,n._)("td",null,[(0,n._)("button",{onClick:t[12]||(t[12]=t=>$.removeDataPoint(e.index))}," - ")])])))),128))])])])):(0,n.kq)("",!0),U,q]),(0,n._)("footer",j,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.footerLinks,(e=>((0,n.wg)(),(0,n.iD)("a",{key:e.name,href:e.url,target:"_blank"},[(0,n._)("img",{src:e.img,alt:e.alt,class:"institution-logo"},null,8,W)],8,J)))),128))])])}a(560);var B=a(4870),Y=a(2483),K=a(9646),Z=a(7092),Q={i8:"0.8.0"};const ee={MODAL_MAX_WIDTH:"500px",MODAL_MAX_HEIGHT:"90%",CHART_X_AXIS_MIN:20,CHART_X_AXIS_MAX:80,CHART_Y_AXIS_MAX:25,AGE_INI:20,AGE_MIN:21,AGE_MAX:80,TLV_MIN:0,TLV_MAX:2e4,NORMALIZATION_FACTOR:850};var te={data(){return{disclaimerSections:[{title:"Important Information for All Users",content:"The PLD-Progression Grouper application is intended for informational, educational, and research purposes only and should not be used as a substitute for professional medical advice or for direct diagnostic use. The tool is designed to provide insights into Polycystic Liver Disease (PLD) progression but is not meant to replace clinical decision-making or genetic consultation."},{title:"Usage Guidelines",content:"The information provided by this application is not intended for medical diagnosis or treatment decisions without the oversight of qualified healthcare professionals. Users are advised not to base any health-related decisions solely on the results obtained from this application. The data and information presented are provided without any warranty of accuracy, completeness, or usefulness. Users should exercise their own judgment in the interpretation and use of the information."},{title:"Liability and Risk",content:"The application is provided 'as is,' without any guarantees or obligations for support, updates, or accuracy. Under no circumstances shall the creators or affiliates of the PLD-Progression Grouper be liable for any direct, indirect, incidental, or consequential damages arising from the use of the application."},{title:"Contact and Queries",content:"For medical relevance of the application's content, please consult with a healthcare professional. For inquiries or feedback regarding the application, please contact <a href='mailto:info@pld-progression-grouper.org'>info@pld-progression-grouper.org</a>."},{title:"Acknowledgment and Consent",content:"By using the PLD-Progression Grouper, you acknowledge having read, understood, and agreed to the terms stated in this disclaimer. If you do not agree to these terms, you should not use the application."}]}}},ae={data(){return{footerLinks:[{name:"CeRKiD",url:"https://nephrologie-intensivmedizin.charite.de/fuer_patienten/cerkid//",img:"CeRKiD_175x130.jpg",alt:"CeRKiD Logo"},{name:"DFG",url:"https://www.dfg.de/en/",img:"dfg_logo_schriftzug_schwarz_foerderung_en.gif",alt:"DFG Logo"}]}}};const oe={calculatePG3Threshold:e=>.2671*Math.exp(.066*e),calculatePG2Threshold:e=>.5169*Math.exp(.033*e),generateLineData1:(e,t)=>Array.from({length:e},((e,a)=>{const o=t+a;return{x:o,y:oe.calculatePG3Threshold(o)}})),generateLineData2:(e,t)=>Array.from({length:e},((e,a)=>{const o=t+a;return{x:o,y:oe.calculatePG2Threshold(o)}})),calculateLiverGrowthRate:(e,t)=>e>20?100*Math.log(t)/(e-20):null};K.kL.register(...K.zX);var ne={mixins:[te,ae],setup(){const e=(0,Y.tv)(),t=(0,Y.yj)(),a=Q.i8,o=(0,B.iH)(""),r=async()=>{await e.isReady(),"true"===t.query.acknowledgeBanner&&(g.value=!1),t.query.patientId&&(m.value=t.query.patientId),t.query.age&&(_.value=t.query.age),t.query.tlv&&(f.value=t.query.tlv),t.query.patientId&&t.query.age&&t.query.tlv&&P()},i=(0,B.iH)(!1),l=async()=>{try{const e=await fetch("https://api.github.com/repos/halbritter-lab/pld-progression-grouper/commits?per_page=1");if(!e.ok)throw new Error("Network response was not ok.");const t=await e.json();t.length&&(o.value=t[0].sha.substring(0,7))}catch(e){console.error("Error fetching last commit:",e),i.value=!0}},s=(0,B.iH)(""),d=(0,B.iH)(""),u=(0,B.iH)(""),c=(0,B.iH)("true"===localStorage.getItem("disclaimerAcknowledged")),p=(0,B.iH)(localStorage.getItem("acknowledgmentTime")),g=(0,B.iH)(!c.value),h=()=>{const e=(new Date).toLocaleString();g.value=!1,c.value=!0,p.value=e,localStorage.setItem("disclaimerAcknowledged","true"),localStorage.setItem("acknowledgmentTime",e)},v=()=>{g.value=!0},m=(0,B.iH)(""),_=(0,B.iH)(ee.AGE_MIN),f=(0,B.iH)(ee.TLV_MIN),w=(0,B.iH)(null);let b=null;const y=(0,n.Fl)((()=>f.value/ee.NORMALIZATION_FACTOR)),A=(0,n.Fl)((()=>_.value<ee.AGE_MIN||_.value>ee.AGE_MAX||f.value<ee.TLV_MIN||f.value>ee.TLV_MAX?null:(f.value/ee.NORMALIZATION_FACTOR).toFixed(3))),k=(0,n.Fl)((()=>{if(_.value<ee.AGE_MIN||_.value>ee.AGE_MAX||f.value<ee.TLV_MIN||f.value>ee.TLV_MAX)return null;const e=y.value,t=_.value;return e>oe.calculatePG3Threshold(t)?"PG3":e>oe.calculatePG2Threshold(t)&&e<=oe.calculatePG3Threshold(t)?"PG2":"PG1"})),D=(0,n.Fl)((()=>_.value<ee.AGE_MIN||_.value>ee.AGE_MAX||f.value<ee.TLV_MIN||f.value>ee.TLV_MAX?null:oe.calculateLiverGrowthRate(_.value,y.value))),L=(0,B.iH)([]),P=()=>{if(M.value)return void(s.value="Please correct the errors before plotting.");if(!m.value.trim())return void(s.value="Please enter an ID before plotting a point.");const e={id:m.value,age:_.value,tlv:f.value,ntlv:A.value,pg:k.value,lgr:null!==D.value?D.value.toFixed(2):"N/A"};L.value.push(e),b.data.datasets[0].data.push({x:e.age,y:y.value,id:e.id}),b.update(),s.value=""},I=()=>{d.value="",u.value="",(_.value<ee.AGE_MIN||_.value>ee.AGE_MAX)&&(d.value=`Age must be between ${ee.AGE_MIN} and ${ee.AGE_MAX} years.`),(f.value<ee.TLV_MIN||f.value>ee.TLV_MAX)&&(u.value=`Total Liver Volume must be between 0 and ${ee.TLV_MAX} ml.`)},M=(0,n.Fl)((()=>""!==d.value||""!==u.value));(0,n.YP)(_,I),(0,n.YP)(f,I);const T=e=>{L.value.splice(e,1),b&&b.data.datasets.length>0&&(b.data.datasets[0].data.splice(e,1),b.update())},C=()=>{b&&b.resize()},G=()=>{const e=w.value.getContext("2d"),t=oe.generateLineData1(61,20),a=oe.generateLineData2(61,20);b=new K.kL(e,{type:"scatter",data:{datasets:[{label:"Age vs Normalized Liver Volume",data:[],backgroundColor:"#180C0C",borderColor:"#180C0C",borderWidth:1,pointRadius:5},{label:"Ceiling",data:Array.from({length:61},((e,t)=>({x:20+t,y:25}))),borderColor:"transparent",borderWidth:0,showLine:!0,pointRadius:0,fill:"+1",backgroundColor:"#B2241C33"},{label:"Trend Line 1",data:t,borderColor:"#B2241C",borderWidth:3,showLine:!0,pointRadius:0,fill:"+1",backgroundColor:"#F64C4633"},{label:"Trend Line 2",data:a,borderColor:"#F64C46",borderWidth:2,showLine:!0,pointRadius:0,fill:"origin",backgroundColor:"#FDA3A133"}]},options:{scales:{x:{title:{display:!0,text:"Age (years)"},type:"linear",min:ee.CHART_X_AXIS_MIN,max:ee.CHART_X_AXIS_MAX},y:{title:{display:!0,text:"nTLV"},beginAtZero:!0,max:ee.CHART_Y_AXIS_MAX}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){let t=e.dataset.label||"";t&&(t+=": "),null!==e.parsed.x&&(t+=e.parsed.x),null!==e.parsed.y&&(t+=", "+e.parsed.y.toFixed(2));const a=e.raw;return a&&a.id&&(t+=`; ID: ${a.id}`),t}}}}}})},H=()=>{window.print()},V=()=>{const e=document.createElement("a");e.href=w.value.toDataURL("image/png"),e.download="plot.png",e.click()},x=()=>{const e=JSON.stringify(L.value),t="data:application/json;charset=utf-8,"+encodeURIComponent(e),a=`data_${(new Date).toISOString()}.json`,o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download",a),o.click()},R=(0,B.iH)(null),E=()=>{R.value&&R.value.click()},N=async e=>{const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=e=>{const t=JSON.parse(e.target.result);L.value.push(...t),t.forEach((e=>{b.data.datasets[0].data.push({x:e.age,y:e.ntlv})})),b.update()},a.readAsText(t)};function z(e,t){let a=document.querySelector(`meta[name="${e}"]`);a?a.setAttribute("content",t):(a=document.createElement("meta"),a.setAttribute("name",e),a.setAttribute("content",t),document.head.appendChild(a))}const F=()=>{const e=Z.P6.book_new(),t=Z.P6.json_to_sheet(L.value);Z.P6.book_append_sheet(e,t,"Data");const a=`Data_${(new Date).toISOString()}.xlsx`;Z.NC(e,a)};return(0,n.bv)((()=>{r(),document.documentElement.style.setProperty("--modal-max-width",ee.MODAL_MAX_WIDTH),document.documentElement.style.setProperty("--modal-max-height",ee.MODAL_MAX_HEIGHT),l(),document.title="PLD-Progression Grouper",z("description","PLD-Progression Grouper is a Vue.js web application, based on extensive research, offering insights into Polycystic Liver Disease (PLD) progression. Developed by Bernt Popp, Ria Schönauer, Dana Sierks, and Jan Halbritter, this tool facilitates understanding of PLD for both educational and research purposes."),z("keywords","PLD, Polycystic Liver Disease, Liver Health, Medical Research, Data Visualization, Vue.js, Web Application, Liver Disease Progression, Medical Education, Healthcare Technology"),z("author","Bernt Popp, Ria Schönauer, Dana Sierks, Jan Halbritter"),z("creator","Bernt Popp, Ria Schönauer, Dana Sierks, Jan Halbritter"),G(),window.addEventListener("resize",C)})),(0,n.Ah)((()=>{window.removeEventListener("resize",C)})),{version:a,lastCommitHash:o,idWarningMessage:s,ageValidationMessage:d,tlvValidationMessage:u,isInvalidInput:M,showModal:g,closeModal:h,acknowledgmentTime:p,disclaimerAcknowledged:c,reopenModal:v,dataPoints:L,patientId:m,age:_,totalLiverVolume:f,normalizedTLV:y,formattedNormalizedTLV:A,progressionGroup:k,liverGrowthRate:D,addDataPoint:P,removeDataPoint:T,chartCanvas:w,printPage:H,downloadChart:V,fileInput:R,triggerFileInput:E,saveDataAsJson:x,loadDataFromJson:N,downloadDataAsExcel:F,fetchError:i}}},re=a(89);const ie=(0,re.Z)(ne,[["render",$]]);var le=ie;const se=[{path:"/",name:"Home",component:le}],de=(0,Y.p7)({history:(0,Y.PO)(),routes:se});var ue=de,ce=a(5431);(0,ce.z)("/pld-progression-grouper/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh."),window.location.reload(!0)},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),(0,o.ri)(le).use(ue).mount("#app")}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,o,n,r){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],r=e[u][2];for(var l=!0,s=0;s<o.length;s++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](o[s])}))?o.splice(s--,1):(l=!1,r<i&&(i=r));if(l){e.splice(u--,1);var d=n();void 0!==d&&(t=d)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,n,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,r,i=o[0],l=o[1],s=o[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(s)var u=s(a)}for(t&&t(o);d<i.length;d++)r=i[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},o=self["webpackChunkpld_progression_grouper_app"]=self["webpackChunkpld_progression_grouper_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(9381)}));o=a.O(o)})();
//# sourceMappingURL=app.e388834c.js.map